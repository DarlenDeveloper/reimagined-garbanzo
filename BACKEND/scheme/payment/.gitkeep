# Payment Service Schema
# Manages transactions, payouts, and payment methods
# ğŸ” BUYER DATA FILTERED BY: auth.user_id â†’ buyer_id
# ğŸ” VENDOR DATA FILTERED BY: auth.user_id â†’ vendor_user â†’ vendor_id

## Tables:
# - transactions (transaction_id, order_id, vendor_id, buyer_id [FK], gross_amount, commission, commission_rate, net_amount, currency, payment_method, payment_provider[chipper/card/mobile_money/paypal/bnpl], status[pending/completed/failed/refunded], processed_at, created_at)
# - payouts (payout_id, vendor_id, amount, currency, status[pending/processing/completed/failed], bank_details, requested_at, processed_at)
# - payment_methods (method_id, buyer_id [FK: buyers.buyer_id], type[card/mobile_money/paypal], provider, last_four, expiry, is_default, created_at)
# - refunds (refund_id, transaction_id, order_id, amount, reason, status[pending/approved/rejected/processed], requested_at, processed_at)

## Auth Filtering:
# - Buyer payment methods: GET /payment-methods â†’ WHERE buyer_id = auth.user_id
# - Buyer transactions: GET /transactions â†’ WHERE buyer_id = auth.user_id
# - Vendor transactions: GET /transactions â†’ WHERE vendor_id = auth.vendor_id
# - Vendor payouts: GET /payouts â†’ WHERE vendor_id = auth.vendor_id

## Payment Providers:
# - Chipper Cash (primary)
# - Credit/Debit Cards (Mastercard, Visa)
# - Mobile Money
# - PayPal
# - BNPL (internal)

## Features:
# - 3% platform commission
# - Vendor payouts
# - Multiple payment methods
# - Refund processing
# - Transaction history
# - Available balance tracking
